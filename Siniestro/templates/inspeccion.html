{% extends 'index.html' %}

{% comment %} Formulario para los datos de la inspección {% endcomment %}

{% block titulo %} Inspección {% endblock titulo %}

 {% block scriptcss %} 
 	<link rel="stylesheet" href="/static/css/Inspeccion.css">  
 {% endblock scriptcss %}

{% block contenido %}
<strong>Inspección</strong>
<form class="form-horizontal" id="formulario_inspeccion" method="post" action="" accept-charset="utf-8"> <!-- Generación el formulario para la inspección del aviso de siniestro. -->
{% csrf_token %}
	<input type="hidden" name="varIdInspeccion" id="varIdInspeccion" value="{{ inspeccion.0.0 }}" />
	<input type="hidden" name="varIdAvisoSiniestro" id="varIdAvisoSiniestro" value="{{ inspeccion.0.1 }}" />
	<input type="hidden" name="varIdConstancia" id="varIdConstancia" value="{{ inspeccion.0.20 }}" />
	<input type="hidden" name="varIdPersonalApoyo" id="varIdPersonalApoyo" value="{{ inspeccion.0. }}" />
	
	<fieldset>			
	<div class="alert alert-block">
		<h4>Datos del Aviso de Siniestro</h4>
	</div>
	
	<div class="row">
		<div class="span6">
			<div class="control-group">
		   		<label class="control-label">Folio de Aviso</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtNumeroAviso" id="txtNumeroAviso" value="{{ inspeccion.0.3 }}" readonly>
			    		<a href="#modal_buscar_aviso_siniestro" role="button" class="btn btn-primary" data-toggle="modal" id="btnBuscarAvisoSiniestroModal"><i class="icon-search icon-white"></i></a>
			    	
			    	</div>
		  		</div>
			</div> 
		</div>
		
		<div class="span5">
			<label class="control-label">Tipo de Aviso </label>
			<div class="controls">
	  			<div clascriptjsss="input-prepend">
		    		<input type="text" name="txtTipoAviso" id="txtTipoAviso" value="{{ inspeccion.0.4 }}" readonly>
		    	</div>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="span6">								
			<div class="control-group">
		   		<label class="control-label">Fecha de Aviso</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
		  				<input type="text" class="input-small" id="dtpFechaAviso" name="dtpFechaAviso" value='{{ inspeccion.0.5 }}' readonly/>
			    	</div>
		  		</div>
			</div>		
		</div>
		
		<div class="span5">
			<div class="control-group">	
				<label class="control-label">Hora de Aviso</label>
				<div class="controls">
					<div class="input-append bootstrap-timepicker">
			            <input id="tpHoraAviso" type="text" class="input-small" value='{{ inspeccion.0.6 }}' readonly>
			            <span class="add-on"><i class="icon-time"></i></span>
			        </div>
			    </div>
	        </div>
	    </div>
	</div>		
	
	<div class="row">	
		<div class="span6">												
			<div class="contiarol-group">	  	
		  		<label class="control-label">Fecha de Siniestro</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" class="input-small" id="dtpFechaSiniestro" name="dtpFechaSiniestro" value='{{ inspeccion.0.7 }}' readonly/>			    		
		    		</div>
		  		</div>
			</div>
		</div>
		
		<div class="span5">	
			<div class="control-group">
				<label class="control-label">Hora de Siniestro</label>
				<div class="controls">
					<div class="input-append bootstrap-timepicker">
			            <input id="tpHoraSiniestro" type="text" class="input-small" value='{{ inspeccion.0.8 }}' readonly>
			            <span class="add-on"><i class="icon-time"></i></span>
			        </div>
			    </div>
	        </div>
	    </div>
	</div>
		
	<div class="row">
		<div class="span6">
			<label class="control-label">Via del Aviso </label>
			<div class="controls">
				<div clascriptjsss="input-prepend">
		    		<input type="text" name="txtViaAviso" id="txtViaAviso" value="{{ viaAviso }}" readonly>
		    	</div>
			</div>
		</div>
		
		<div class="span5">
			<div class="control-group">
		   		<label class="control-label">Otros</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtOtros" id="txtOtros" value="{{ otraVia }}" readonly>
			    	</div>
		  		</div>
			</div>
		</div>
	</div>
	
	<div class="row">
		<div class="span6">
			<div class="control-group">
		   		<label class="control-label">Quien Avisa</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtQuienAvisa" id="txtQuienAvisa" value="{{ inspeccion.0.11 }}" readonly>
			    	</div>
		  		</div>
			</div> 
		</div>
		
		<div class="span5">
			<div class="control-group">
		  		<label class="control-label">Quien Recibe</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtQuienRecibe" id="txtQuienRecibe" value="{{ inspeccion.0.12 }}" readonly>
		    		</div>
		  		</div>
			</div>
		</div>
	</div>
		
	<div class="row">
		<div class="span6">
			<div class="control-group">
				<label class="control-label">Causa Siniestro</label>
				<div class="controls">
					<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtCausaSiniestro" id="txtCausaSiniestro" value="{{ inspeccion.0.13 }}" readonly>
		    		</div>
				</div>
			</div>
		</div>
		<div class="span5">
			<div class="control-group">
		   		<label class="control-label">Constancia</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtConstancia" id="txtConstancia" value="{{ inspeccion.0.15 }}" readonly>
			    	</div>
		  		</div>
			</div> 
		</div>
	</div>
	
	<div class="row">
		<div class="span6">
			<div class="control-group">
		  		<label class="control-label">Ejercicio</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtEjercicio" id="txtEjercicio" value="{{ inspeccion.0.16 }}" readonly>
		    		</div>
		  		</div>
			</div>
		</div>
		
		<div class="span5">
			<div class="control-group">
		   		<label class="control-label">Nombre de Asegurado</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtNombreAsegurado" id="txtNombreAsegurado" value="{{ inspeccion.0.17 }}" readonly>
			    	</div>
		  		</div>
			</div> 
		</div>
	</div>
	
	<div class="row">
		<div class="span6">
			<div class="control-group">
		   		<label class="control-label">Vigencia de Constancia</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtVigenciaConstancia" id="txtVigenciaConstancia" value="{{ inspeccion.0.18 }}" readonly>
			    	</div>
		  		</div>
			</div> 
		</div>
		
		<div class="span5">
			<div class="control-group">
		   		<label class="control-label">Técnico</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<input type="text" name="txtTecnico" id="txtTecnico" value="{{ inspeccion.0.21 }}" readonly>
			    		<a href="#modal_buscar_tecnico" role="button" class="btn btn-primary" data-toggle="modal" id="btnBuscarTecnicoModal"><i class="icon-search icon-white"></i></a>
			    	</div>
		  		</div>
			</div> 
		</div>
	</div>
	
	<div class="row">
		<div class="span6">
			<div class="control-group">
				<label class="control-label">Descripcion del Bien Afectado</label>
		  		<div class="controls">
		  			<div clascriptjsss="input-prepend">
			    		<textarea class="span9 input-xlarge" type="text" name="txtBien" id="txtBien" readonly>{{ inspeccion.0.14 }}</textarea>  
		    		</div>
		  		</div>
			</div>
		</div>
	</div>
	
	<table class="table tbl_bienes table-striped">
		<thead>
			<th style="display:none;">IdBienAfectado</th>
			<th style="display:none;">IdDescripcion</th>
			<th></th>
			<th>Nombre</th>
			<th>Cantidad</th>
			<th>Valor Unitario</th>
			<th>Suma Asegurada</th>
			<th>No. Bienes Afectados</th>
			<th>Estado de los Daños</th>
			<th>Descripcion</th>
			<th></th>
		</thead>			
		<tbody>
			{% if bienes %}
				{% for bien in bienes %}
					<tr>
						<td style="display:none;">{{ bien.IdBienAfectado }}</td>
						<td style="display:none;">{{ bien.IdDescripcion }}</td>
						
						{% if bien.IdBienAfectado == '' %}
							<td><input type="checkbox" name="checkSeleccionar" disabled="disabled" /></td>
						{% else %}	
							<td><input type="checkbox" name="checkSeleccionar" checked disabled="disabled" /></td>
						{% endif %}
						
						<td>{{ bien.Nombre }}</td>
						<td>{{ bien.Cantidad }}</td>
						<td>{{ bien.ValorUnitario }}</td>
						<td>{{ bien.SumaAsegurada }}</td>
						<td><input type="text" class="input-mini" value="{{ bien.NoBienesAfectados }}" style="text-align:right;" readonly></td>
						<td><input type="text" class="input-mini" value="{{ bien.EstadoDanos }}" readonly></td>
						<td><input type="text" class="input-large" value="{{ bien.Descripcion }}" readonly></td>
					</tr>
				{% endfor %}
			{% endif %}
		</tbody>
	</table>
	
	<div class="row">
		<!-- Generación de botones del formulario -->
		<div class="control-group pull-right">
	  		<label class="controlecnico-label"></label>
	  		<div class="controls">
	  			<a id="btnVistaPrevia" role="button" class="btn btn-success" disabled><i class="icon-file icon-white"></i> Vista Previa</a>
	  			<a id="btnGuardar" name="btnGuardar" class="btn btn-success" >Guardar</a>
		    	<a role="button" class="sort btn btn-warning" id="btnListadoAvisos"><i class="icon-list icon-white"></i> Listado de Avisos</a>
	  		</div>
		</div> <!-- Fin generación de botones del formulario -->
	</div>
	
	<div id="modal_buscar_aviso_siniestro" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">  <!-- Generación del modal que busca los avisos de sineistros terminados. -->
		<div class="modal-header">
		   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		   <h3 id="myModalLabel">Buscar Avisos de Siniestro</h3>
		</div>
	    <div class="modal-body">																								
			<input type="text" class="input-xlarge search-query span4" id="txtBuscarAvisoSiniestro">
			<button type="submit" class="btn" id="btnBuscarAvisoSiniestro"><i class="icon-search"></i>Buscar</button>
		 					
			<p></p>
			<table class="table tbl_buscar_aviso_siniestro">
				<thead>
					<tr>					
					    <th style="display: none;">IdAvisoSiniestro</th>
						<th>Folio</th>						
						<th>Tipo</th>
						<th>Fecha de Siniestro</th>	
						<th>Vigencia</th>
						<th style="display: none;">FechaAviso</th>
						<th style="display: none;">HoraAviso</th>
						<th style="display: none;">HoraSiniestro</th>
						<th style="display: none;">Otros</th>
						<th style="display: none;">ViaAviso</th>
						<th style="display: none;">QuienAvisa</th>
						<th style="display: none;">QuienRecibe</th>
						<th style="display: none;">CausaSiniestro</th>
						<th style="display: none;">DescripcionBien</th>
						<th style="display: none;">FolioConstancia</th>
						<th style="display: none;">Ejercicio</th>
						<th>Asegurado</th>
						<th style="display: none;">IdConstancia</th>
						<th></th>	
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>    																		
		</div> 																    
		<div class="modal-footer">
			<button id="btnCerrarModalBuscarAvisoSiniestro" class="btn" data-dismiss="modal">Cerrar</button>
		</div>					
	</div>
	
	<div id="modal_buscar_tecnico" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">  <!-- Generación del modal que busca los tecnicos para asignar a inspección de siniestro. -->
		<div class="modal-header">
		   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		   <h3 id="myModalLabel">Buscar Tecnico</h3>
		</div>
	    <div class="modal-body">																								
			<input type="text" class="input-xlarge search-query span4" id="txtBuscarTecnico">
			<button type="submit" class="btn" id="btnBuscarTecnico"><i class="icon-search"></i>Buscar</button>
		 					
			<p></p>
			<table class="table tbl_buscar_tecnico">
				<thead>
					<tr>		
						<th>RFC</th>	
						<th>Nombre de Técnico</th>
						<th  style="display: none;">IdPersonalApoyo</th>
						<th></th>	
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>    																		
		</div> 																    
		<div class="modal-footer">
			<button id="btnCerrarModalBuscarTecnico" class="btn" data-dismiss="modal">Cerrar</button>
		</div>					
	</div>	
	
		
	</fieldset>
</form>
{% endblock contenido %}

{% block scriptjs %} 
 	<script src="/static/js/Inspeccion.js"></script> 
 	<script src="/static/js/jquery.validate.js"></script>
{% endblock scriptjs %} 